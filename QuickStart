
====  Conventions  ========

1) No bridge, ProxyARP on host.
2) No DHCP, static IP in container.
3) The same suffix number is used for vethXXX, MAC and IP.
4) Host and guest OS is Ubuntu 12.04 (more choices on wiki)

====  Install LXC  ========

apt-get --no-install-recommends lxc cgroup-lite debootstrap
service lxc stop
sed -ie 's,USE_LXC_BRIDGE="true",USE_LXC_BRIDGE="false",' /etc/default/lxc
service lxc start
cd /etc && hg clone http://code.google.com/p/lxc-loader/

====  Boot system  ========

Add to /etc/rc.local:

/etc/lxc-loader/lxc-onboot [names of containers...] &

====  Create container  ========

lxc-create -n $NAME -t ubuntu -- -a i386 -r precise

Edit /var/lib/lxc/$NAME/config:
lxc.network.type = veth
lxc.network.flags = up
lxc.network.veth.pair = vethXXX
lxc.network.name = eth0
lxc.network.hwaddr = 00:16:3e:xx:xx:XX

Edit /var/lib/lxc/$NAME/rootfs/etc/network/interfaces:
iface eth0 inet static
        address x.x.x.XX
        gateway x.x.x.1
        netmask 255.255.255.0
        dns-nameservers x.x.x.2 x.x.x.3

====  Start container  ========

/etc/lxc-loader/lxc-start1 $NAME
lxc-console -n $NAME
..default login = ubuntu, password = ubuntu, disconnect = Ctrl+a,q

== END ==
